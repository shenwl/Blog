# 打包分析 & preloading & prefetching

## 打包分析
1. 使用[webpack/analyse](https://github.com/webpack/analyse)进行分析
  - 使用，打包并生成分析文件: `webpack --profile --json > stats.json`
  - 将stats.json上传[在线分析工具](http://webpack.github.com/analyse)，查看图形化分析

2. 使用其它分析工具
  - https://webpack.js.org/guides/code-splitting#bundle-analysis
  - webpack-bundle-analyzer

## webpack希望我们如何写代码
1. code split的局限
  - 把lodash等库做code split，有缓存，第二次访问速度很快
  - 但是对第一次访问的速度并没有加强
  - 我们希望第一次访问的速度就是最快的

2. 交互代码模块异步加载
  ```javascript
  // handleClick.js
  export default function handleClick() {
    const el = document.createElement('div');
    el.innerHTML = 'dynamic import';
    document.body.appendChild(el);
  }

  // index.js
  document.addEventListener('click', () => {
    import('./handleClick.js').then(({ default: handleClick }) => {
      handleClick();
    });
  });
  ```

